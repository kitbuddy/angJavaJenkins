git version

Pre-Requisites
Clone the Code By using the below link.

"https://github.com/StellarStrategist/jenkins-angular.git"


Step 1: Install NodeJS on your system

For the purpose of this tutorial, I have a NodeJS installed on my Windows machine.

Install NodeJS on Windows
Install NodeJS on Linux
Install NodeJS on MacOS
Install NodeJS on your system
Step 2: Create a new Angular Project

Open the terminal on your machine and type the following command:

ng new my-angular-app
This command creates a new angular project on your machine by the name of my-angular-app. Choose any routing and styling settings you want and generate. Remember the directory where you have created this project. Leave it as it is for now.

Step 3: Install Jenkins on your system

Next, please make sure you have Jenkins up and running on Linux. There are many ways to use Jenkins depending on your needs. For this tutorial, I have set up Jenkins using a virtual machine. To learn how to install Ubuntu in a virtual box click here. Then, please refer to the following links to install Jenkins.

Install Jenkins in AWS EC2
Install Jenkins in Debian Linux
Step 4: Add Jenkinsfile to your project

Now, open the project you created earlier in your IDE and create folder called Jenkins inside the root directory of your project. Create another folder called scripts inside this folder. This folder will hold our bash scripts.

Create two text files inside this folder called deliver.sh and kill.sh.

The content for deliver.sh will be as follows:

#!/usr/bin/env sh

npm run ng build
npm run ng serve &
sleep 1
echo $! > .pidfile

echo 'Now...'
echo 'Visit http://localhost:4200 to see your Node.js/Angular application in action.'
This script is responsible for building and serving your angular application.

The content for kill.sh will be as follows:

#!/usr/bin/env sh

kill $(cat .pidfile)
This script will properly close down your angular application.

Now create another file in the root directory of your project called the Jenkinsfile. This file will contain all the settings that jenkins will read from when it fetches code from GitHub.

The content of Jenkinsfile is as follows:

pipeline {
    agent any
    tools {nodejs "NODEJS"}
    stages {
        stage('Build') {
            steps {
                sh 'npm install'
            }
        }
        stage('Deliver') {
            steps {
                sh 'chmod -R +rwx ./jenkins/scripts/deliver.sh'
                sh 'chmod -R +rwx ./jenkins/scripts/kill.sh'
                sh './jenkins/scripts/deliver.sh'
                input message: 'Finished using the web site? (Click "Proceed" to continue)'
                sh './jenkins/scripts/kill.sh'
            }
        }
    }
}
